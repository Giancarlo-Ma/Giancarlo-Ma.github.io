<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="baidu-site-verification" content="LXuJEpjaKP" />
<meta name="google-site-verification" content="Ua5o3QmWpq8fShnQBye7AB9hZQSy-k49fUJrl5BPWh0" />
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Higher Order FunctionsHOFs in Environment DiagramsRecall that an environment diagram keeps track of all the variables thathave been defined and the values they are bound to. However, values arenot nec">
<meta property="og:type" content="article">
<meta property="og:title" content="cs61a-disc02">
<meta property="og:url" content="http://yoursite.com/2018/08/28/cs61a-disc02/index.html">
<meta property="og:site_name" content="Giancarlo&#39;s Blog">
<meta property="og:description" content="Higher Order FunctionsHOFs in Environment DiagramsRecall that an environment diagram keeps track of all the variables thathave been defined and the values they are bound to. However, values arenot nec">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/2018/08/28/cs61a-disc02/en8.png">
<meta property="og:image" content="http://yoursite.com/2018/08/28/cs61a-disc02/en10.png">
<meta property="og:image" content="http://yoursite.com/2018/08/28/cs61a-disc02/en11.png">
<meta property="article:published_time" content="2018-08-28T14:05:10.000Z">
<meta property="article:modified_time" content="2020-06-07T02:09:33.090Z">
<meta property="article:author" content="Guohang Ma">
<meta property="article:tag" content="python">
<meta property="article:tag" content="SICP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2018/08/28/cs61a-disc02/en8.png">

<link rel="canonical" href="http://yoursite.com/2018/08/28/cs61a-disc02/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>cs61a-disc02 | Giancarlo's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Giancarlo's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Code Life</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/28/cs61a-disc02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Guohang Ma">
      <meta itemprop="description" content="developer blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Giancarlo's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          cs61a-disc02
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-08-28 22:05:10" itemprop="dateCreated datePublished" datetime="2018-08-28T22:05:10+08:00">2018-08-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-07 10:09:33" itemprop="dateModified" datetime="2020-06-07T10:09:33+08:00">2020-06-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CS61A/" itemprop="url" rel="index"><span itemprop="name">CS61A</span></a>
                </span>
            </span>

          
            <span id="/2018/08/28/cs61a-disc02/" class="post-meta-item leancloud_visitors" data-flag-title="cs61a-disc02" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Higher-Order-Functions"><a href="#Higher-Order-Functions" class="headerlink" title="Higher Order Functions"></a>Higher Order Functions</h1><h2 id="HOFs-in-Environment-Diagrams"><a href="#HOFs-in-Environment-Diagrams" class="headerlink" title="HOFs in Environment Diagrams"></a>HOFs in Environment Diagrams</h2><p>Recall that an environment diagram keeps track of all the variables that<br>have been defined and the values they are bound to. However, values are<br>not necessarily only integers and strings. Environment diagrams can model<br>more complex programs that utilize higher order functions.</p>
<a id="more"></a>
<img src="/2018/08/28/cs61a-disc02/en8.png" class="" title="% } Lambdas are represented similiarly to functions in environment diagrams, but since they lack instrinsic names, the lambda symbol (λ) is used instead. The parent of any function (including lambdas) is always the frame in which the function is defined. It is useful to include the parent in environment diagrams in order to find variables that are not defined in the current frame. In the previous example, when we call add two (which is really the lambda function), we need to know what x is in order to compute x + y. Since x is not in the frame f2, we look at the frame’s parent, which is f1. There, we find x is bound to 2. As illustrated above, higher order functions that return a function have their return value represented with a pointer to the function object. ## A Note on Lambda Expressions A lambda expression evaluates to a function, called a lambda function. In the code above, lambda y: x + y is a lambda expression, and can be read as a function that takes in one parameter y and returns x + y. A lambda expression by itself evaluates to a function but does not bind it to a name. Also note that the return expression of this function is not evaluated until the lambda is called. This is similar to how defining a new function using a def statement does not execute the functions body until it is later called. &lt;figure class&#x3D;highlight plain&gt;&lt;table&gt;&lt;tr&gt;&lt;td class&#x3D;gutter&gt;&lt;pre&gt;&lt;span class&#x3D;line&gt;1&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;2&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;3&lt;&#x2F;span&gt;&lt;br&gt;&lt;&#x2F;pre&gt;&lt;&#x2F;td&gt;&lt;td class&#x3D;code&gt;&lt;pre&gt;&lt;span class&#x3D;line&gt;&gt;&gt;&gt; what &#x3D; lambda x : x + 5&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;&gt;&gt;&gt; what&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;&lt;function &lt;lambda&gt; at 0xf3f490&gt;&lt;&#x2F;span&gt;&lt;br&gt;&lt;&#x2F;pre&gt;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;&lt;&#x2F;table&gt;&lt;&#x2F;figure&gt; Unlike def statements, lambda expressions can be used as an operator or an operand to a call expression. This is because they are simply one-line expressions that evaluate to functions. &lt;figure class&#x3D;highlight plain&gt;&lt;table&gt;&lt;tr&gt;&lt;td class&#x3D;gutter&gt;&lt;pre&gt;&lt;span class&#x3D;line&gt;1&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;2&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;3&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;4&lt;&#x2F;span&gt;&lt;br&gt;&lt;&#x2F;pre&gt;&lt;&#x2F;td&gt;&lt;td class&#x3D;code&gt;&lt;pre&gt;&lt;span class&#x3D;line&gt;&gt;&gt;&gt; (lambda y: y + 5)(4)&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;9&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;&gt;&gt;&gt; (lambda f, x: f(x))(lambda y: y + 1, 10)&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;11&lt;&#x2F;span&gt;&lt;br&gt;&lt;&#x2F;pre&gt;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;&lt;&#x2F;table&gt;&lt;&#x2F;figure&gt; Questions 1.1 Draw the environment diagram that results from executing the code below. &lt;figure class&#x3D;highlight python&gt;&lt;table&gt;&lt;tr&gt;&lt;td class&#x3D;gutter&gt;&lt;pre&gt;&lt;span class&#x3D;line&gt;1&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;2&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;3&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;4&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;5&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;6&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;7&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;8&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;9&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;10&lt;&#x2F;span&gt;&lt;br&gt;&lt;&#x2F;pre&gt;&lt;&#x2F;td&gt;&lt;td class&#x3D;code&gt;&lt;pre&gt;&lt;span class&#x3D;line&gt;&lt;span class&#x3D;function&gt;&lt;span class&#x3D;keyword&gt;def&lt;&#x2F;span&gt; &lt;span class&#x3D;title&gt;curry2&lt;&#x2F;span&gt;&lt;span class&#x3D;params&gt;(h)&lt;&#x2F;span&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt; &lt;span class&#x3D;function&gt;&lt;span class&#x3D;keyword&gt;def&lt;&#x2F;span&gt; &lt;span class&#x3D;title&gt;f&lt;&#x2F;span&gt;&lt;span class&#x3D;params&gt;(x)&lt;&#x2F;span&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt; &lt;span class&#x3D;function&gt;&lt;span class&#x3D;keyword&gt;def&lt;&#x2F;span&gt; &lt;span class&#x3D;title&gt;g&lt;&#x2F;span&gt;&lt;span class&#x3D;params&gt;(y)&lt;&#x2F;span&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt; &lt;span class&#x3D;keyword&gt;return&lt;&#x2F;span&gt; h(x, y)&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt; &lt;span class&#x3D;keyword&gt;return&lt;&#x2F;span&gt; g&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt; &lt;span class&#x3D;keyword&gt;return&lt;&#x2F;span&gt; f&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;make_adder &#x3D; curry2(&lt;span class&#x3D;keyword&gt;lambda&lt;&#x2F;span&gt; x, y: x + y)&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;add_three &#x3D; make_adder(&lt;span class&#x3D;number&gt;3&lt;&#x2F;span&gt;)&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;add_four &#x3D; make_adder(&lt;span class&#x3D;number&gt;4&lt;&#x2F;span&gt;)&lt;&#x2F;span&gt;&lt;br&gt;&lt;span class&#x3D;line&gt;five &#x3D; add_three(&lt;span class&#x3D;number&gt;2&lt;&#x2F;span&gt;)&lt;&#x2F;span&gt;&lt;br&gt;&lt;&#x2F;pre&gt;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;&lt;&#x2F;table&gt;&lt;&#x2F;figure&gt; {% asset_img en9.png">
<p>1.2 Write curry2 as a lambda function</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curry2 = <span class="keyword">lambda</span> h: <span class="keyword">lambda</span> x: <span class="keyword">lambda</span> y: h(x, y)</span><br></pre></td></tr></table></figure>
<p>1.3 Draw the environment diagram that results from executing the code below.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">    n = <span class="number">8</span></span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">g</span><span class="params">(x)</span>:</span></span><br><span class="line">    n = <span class="number">9</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">h</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> h</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(f, x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> f(x + n)</span><br><span class="line"></span><br><span class="line">f = f(g, n)</span><br><span class="line">g = (<span class="keyword">lambda</span> y: y())(f)</span><br></pre></td></tr></table></figure>
<img src="/2018/08/28/cs61a-disc02/en10.png" class="">

<p>1.4 The following question is extremely difficult. Something like this would not<br>appear on the exam. Nonetheless, it’s a fun problem to try.<br>Draw the environment diagram that results from executing the code below.<br>Note that using the + operator with two strings results in the second string<br>being appended to the first. For example “C” + “S” concatenates the two<br>strings into one string “CS”</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">y = <span class="string">"y"</span></span><br><span class="line">h = y</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">y</span><span class="params">(y)</span>:</span></span><br><span class="line">    h = <span class="string">"h"</span></span><br><span class="line">    <span class="keyword">if</span> y == h:</span><br><span class="line">        <span class="keyword">return</span> y + <span class="string">"i"</span></span><br><span class="line">    y = <span class="keyword">lambda</span> y: y(h)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> h: y(h)</span><br><span class="line">y = y(y)(y)</span><br></pre></td></tr></table></figure>
<h2 id="Writing-Higher-Order-Functions"><a href="#Writing-Higher-Order-Functions" class="headerlink" title="Writing Higher Order Functions"></a>Writing Higher Order Functions</h2><p>1.5 Write a function that takes in a function cond and a number n and prints<br>numbers from 1 to n where calling cond on that number returns True.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">keep_ints</span><span class="params">(cond, n)</span>:</span></span><br><span class="line">    <span class="string">"""Print out all integers 1..i..n where cond(i) is true</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; def is_even(x):</span></span><br><span class="line"><span class="string">    ...     # Even numbers have remainder 0 when divided by 2.</span></span><br><span class="line"><span class="string">    ...     return x % 2 == 0</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; keep_ints(is_even, 5)</span></span><br><span class="line"><span class="string">    2</span></span><br><span class="line"><span class="string">    4</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    i = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> i &lt;= n:</span><br><span class="line">        <span class="keyword">if</span> cond(i):</span><br><span class="line">            print(i)</span><br><span class="line">        i += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>1.6 Write a function similar to keep_ints like before, but now it takes in a<br>number n and returns a function that has one parameter cond. The returned<br>function prints out numbers from 1 to n where calling cond on that number<br>returns True.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">keep_ints</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="string">"""Returns a function which takes one parameter cond and prints out</span></span><br><span class="line"><span class="string">    all integers 1..i..n where calling cond(i) returns True.</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; def is_even(x):</span></span><br><span class="line"><span class="string">    ...     # Even numbers have remainder 0 when divided by 2.</span></span><br><span class="line"><span class="string">    ...     return x % 2 == 0</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; keep_ints(5)(is_even)</span></span><br><span class="line"><span class="string">    2</span></span><br><span class="line"><span class="string">    4</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(cond)</span>:</span></span><br><span class="line">        i = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> i &lt;= n:</span><br><span class="line">            <span class="keyword">if</span> cond(i):</span><br><span class="line">                print(i)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> f</span><br></pre></td></tr></table></figure>
<h1 id="Recursion"><a href="#Recursion" class="headerlink" title="Recursion"></a>Recursion</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factorial</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">or</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> n * factorial(n<span class="number">-1</span>)</span><br></pre></td></tr></table></figure>
<p>A recursive function is a function that is defined in terms of itself. A good<br>example is the factorial function. Although we haven’t finished defining<br>factorial, we are still able to call it since the function body is not evaluated<br>until the function is called. Note that when n is 0 or 1, we just return 1.<br>This is known as the base case, and it prevents the function from infinitely<br>recursing. Now we can compute factorial(2) in terms of factorial(1),<br>and factorial(3) in terms of factorial(2), and factorial(4) – well, you<br>get the idea.</p>
<p>There are three common steps in a recursive definition:</p>
<ol>
<li>Figure out your base case: The base case is usually the simplest<br>input possible to the function. For example, factorial(0) is 1 by<br>definition. You can also think of a base case as a stopping condition<br>for the recursion. If you can’t figure this out right away, move on to<br>the recursive case and try to figure out the point at which we can’t<br>reduce the problem any further.</li>
<li>Make a recursive call with a simpler argument: Simplify your<br>problem, and assume that a recursive call for this new problem will<br>simply work. This is called the “leap of faith”. For factorial, we<br>reduce the problem by calling factorial(n-1).</li>
<li>Use your recursive call to solve the full problem: Remember<br>that we are assuming the recursive call works. With the result of the<br>recursive call, how can you solve the original problem you were asked?<br>For factorial, we just multiply (n − 1)! by n.<br>Note: One way to go understand recursion is to separate out two things: “internal<br>correctness” and not running forever (known as “halting”).<br>A recursive function is internally correct if it is always does the right thing assuming<br>that every recursive call does the right thing. For example, the same factorial<br>function from above but with no base case is internally correct, but does not halt.<br>A recursive function is correct if and only if it is both internally correct and halts; but<br>you can check each property separately. The “recursive leap of faith” is temporarily<br>placing yourself in a mindset where you only check internal correctness.</li>
</ol>
<h2 id="Questions"><a href="#Questions" class="headerlink" title="Questions"></a>Questions</h2><p>2.1 Write a function that takes two numbers m and n and returns their product.<br>Assume m and n are positive integers. Use recursion, not mul or * !<br>Hint: 5 * 3 = 5 + 5 * 2 = 5 + 5 + 5 * 1.<br>For the base case, what is the simplest possible input for multiply?<br>For the recursive case, what does calling multiply(m - 1, n) do? What<br>does calling multiply(m, n - 1) do? Do we prefer one over the other?</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multiply</span><span class="params">(m, n)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; multiply(5, 3)</span></span><br><span class="line"><span class="string">    15</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> m</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> m + multiply(m, n - <span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p>2.2 Write a recursive function that takes in an integer n and prints out a countdown<br>from n to 1.<br>First, think about a base case for the countdown function. What is the<br>simplest input the problem could be given?<br>After you’ve thought of a base case, think about a recursive call with a<br>smaller argument that approches the base case. What happens if you call<br>countdown(n - 1)?<br>Then, put the base case and the recursive call together, and think about<br>where a print statement would be needed.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">countdown</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; countdown(3)</span></span><br><span class="line"><span class="string">    3</span></span><br><span class="line"><span class="string">    2</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    print(n)</span><br><span class="line">    countdown(n - <span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p>2.3 How can we change countdown to count up instead without modifying a lot<br>of the code?</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">countdown</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; countdown(3)</span></span><br><span class="line"><span class="string">    3</span></span><br><span class="line"><span class="string">    2</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    countdown(n - <span class="number">1</span>)</span><br><span class="line">    print(n)</span><br></pre></td></tr></table></figure>

<p>2.4 Write a recursive function that takes a number n and returns the sum of every<br>other digit, starting from the rightmost digit. Assume n is non-negative.<br>You might find the operators // and % useful.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum_every_other_digit</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; sum_every_other_digit(7)</span></span><br><span class="line"><span class="string">    7</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; sum_every_other_digit(30)</span></span><br><span class="line"><span class="string">    0</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; sum_every_other_digit(228)</span></span><br><span class="line"><span class="string">    10</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; sum_every_other_digit(123456)</span></span><br><span class="line"><span class="string">    12</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; sum_every_other_digit(1234567) # 1 + 3 + 5 + 7</span></span><br><span class="line"><span class="string">    16</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> n % <span class="number">10</span> + sum_every_other_digit(n // <span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<p>2.5 Draw an environment diagram for the following code:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rec</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> y &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> x * rec(x, y - <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">rec(<span class="number">3</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<img src="/2018/08/28/cs61a-disc02/en11.png" class="">
<p>Bonus question: what does this function do?<br>x ** y</p>

    </div>

    
    
    
        <div class="reward-container">
  <div>Stick to share, hope you can benefit from these.</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    Donate
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.jpg" alt="Guohang Ma WeChat Pay">
        <p>WeChat Pay</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="Guohang Ma Alipay">
        <p>Alipay</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/python/" rel="tag"># python</a>
              <a href="/tags/SICP/" rel="tag"># SICP</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/08/28/cs61a-disc01/" rel="prev" title="cs61a-disc01">
      <i class="fa fa-chevron-left"></i> cs61a-disc01
    </a></div>
      <div class="post-nav-item">
    <a href="/2018/08/29/cs61a-lab02/" rel="next" title="cs61a-lab02">
      cs61a-lab02 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Higher-Order-Functions"><span class="nav-number">1.</span> <span class="nav-text">Higher Order Functions</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#HOFs-in-Environment-Diagrams"><span class="nav-number">1.1.</span> <span class="nav-text">HOFs in Environment Diagrams</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Writing-Higher-Order-Functions"><span class="nav-number">1.2.</span> <span class="nav-text">Writing Higher Order Functions</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Recursion"><span class="nav-number">2.</span> <span class="nav-text">Recursion</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Questions"><span class="nav-number">2.1.</span> <span class="nav-text">Questions</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Guohang Ma"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Guohang Ma</p>
  <div class="site-description" itemprop="description">developer blog</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">136</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Guohang Ma</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              Counter('post', '/classes/Counter', { title, url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"BRa3pF1NDN4v03GJXXo5M9m0-gzGzoHsz","app_key":"SYv7ekH65uhvGMRacYxtdnn4","server_url":null,"security":false};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '2b6e284e656b715f5a3f',
      clientSecret: 'f34034a370b3c9c3470613f4dba511026a81eaf3',
      repo        : 'giancarlo-ma.github.io# Repository name to store issues',
      owner       : 'giancarlo-ma',
      admin       : ['giancarlo-ma'],
      id          : '36c6725fa2ace2085e0c8b4cd7aa59a7',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
